<div class="image-upload-container">
  <label class="form-label" *ngIf="label">{{ label }}</label>

  <div
    class="upload-area"
    [class.drag-over]="dragOver"
    [class.disabled]="disabled"
    [class.has-image]="previewUrl"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)"
    (click)="triggerFileInput()"
  >
    <div *ngIf="previewUrl" class="image-preview">
      <img [src]="previewUrl" alt="Preview" class="preview-image" />
      <div class="image-overlay">
        <button
          type="button"
          class="btn btn-sm btn-danger remove-btn"
          [disabled]="disabled"
          (click)="removeImage(); $event.stopPropagation()"
        >
          <i class="fas fa-trash"></i>
          Remover
        </button>
      </div>
    </div>

    <div *ngIf="!previewUrl" class="upload-placeholder">
      <div class="upload-icon-wrapper">
        <i class="fas fa-cloud-upload-alt" *ngIf="!disabled"></i>
        <i class="fas fa-spinner fa-spin" *ngIf="disabled"></i>
      </div>
      <p class="upload-text" *ngIf="!disabled">{{ placeholder }}</p>
      <p class="upload-text" *ngIf="disabled">Enviando...</p>
      <p class="upload-formats">
        JPEG, PNG, GIF, WebP, SVG (m√°x. 5MB)
      </p>
    </div>
  </div>

  <input
    type="file"
    #fileInput
    accept="image/*"
    (change)="onFileSelected($event)"
    style="display: none"
    [disabled]="disabled"
  />
</div>
